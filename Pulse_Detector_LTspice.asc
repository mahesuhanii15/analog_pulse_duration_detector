Version 4.1
SHEET 1 1628 680
WIRE 864 -256 48 -256
WIRE 48 -176 48 -256
WIRE 144 -176 48 -176
WIRE 528 -176 224 -176
WIRE 656 -176 528 -176
WIRE 688 -176 656 -176
WIRE 464 -144 352 -144
WIRE 528 -144 528 -176
WIRE 464 -96 464 -144
WIRE 896 -80 832 -80
WIRE 1024 -80 976 -80
WIRE 1056 -80 1024 -80
WIRE 1248 -80 1056 -80
WIRE 48 -64 48 -176
WIRE 48 -64 -32 -64
WIRE 352 -48 352 -64
WIRE 352 -48 272 -48
WIRE 688 -32 688 -176
WIRE 272 -16 272 -48
WIRE 528 0 528 -48
WIRE 48 16 48 -64
WIRE 64 16 48 16
WIRE 272 16 272 -16
WIRE 864 16 864 -256
WIRE 864 16 832 16
WIRE 1056 32 1056 -16
WIRE 1248 64 1248 16
WIRE 272 96 240 96
WIRE 656 112 656 -176
WIRE 1040 112 656 112
WIRE 1184 112 1184 -32
WIRE 1184 112 1120 112
WIRE 1568 112 1488 112
WIRE 64 144 64 96
WIRE 1168 160 864 160
WIRE 1136 176 1008 176
WIRE 1024 208 1024 -80
WIRE 1136 208 1024 208
WIRE 1488 208 1488 112
WIRE 1232 240 1200 192
WIRE 1488 240 1488 208
WIRE 240 272 240 96
WIRE 240 272 192 272
WIRE 864 272 864 160
WIRE 896 272 864 272
WIRE 1008 272 1008 176
WIRE 1008 272 976 272
WIRE 192 288 192 272
WIRE 1264 288 1232 240
WIRE 1424 288 1344 288
WIRE -32 352 -32 -64
WIRE 768 352 -32 352
WIRE 864 352 864 272
WIRE 864 352 768 352
WIRE 1008 368 1008 272
WIRE 1488 384 1488 336
WIRE 1168 432 1168 224
WIRE 1296 432 1248 432
WIRE 1008 496 1008 448
WIRE 768 592 768 352
WIRE 1568 592 1568 256
WIRE 1568 592 768 592
FLAG 192 288 0
FLAG 64 144 0
FLAG 1296 432 0
FLAG 16 16 +12
FLAG 1152 448 -12
FLAG 272 -16 IN
FLAG 528 0 0
FLAG 592 -144 NODE_A
FLAG 1024 -80 VC
FLAG 1056 32 0
FLAG 1248 64 0
FLAG 1232 240 CMP_out
FLAG 1008 496 0
FLAG 1488 208 LED_NODE
SYMBOL voltage 64 0 R0
WINDOW 0 31 19 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage 1152 432 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -12
SYMBOL voltage 272 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 0 0 0 0.8 1 1)
SYMBOL npn 464 -144 R0
SYMATTR InstName Q_inv
SYMATTR Value 2N3904
SYMBOL res 336 -160 R0
SYMATTR InstName R1
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 240 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL pnp 768 -80 R0
WINDOW 0 21 41 Left 2
SYMATTR InstName Q_Charge
SYMATTR Value 2N3906
SYMBOL res 784 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10000
SYMBOL res 992 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_var
SYMATTR Value {Rval}
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL cap 1040 -80 R0
SYMATTR InstName C1
SYMATTR Value 4.7µ
SYMBOL npn 1184 -80 R0
SYMATTR InstName Q_discharge
SYMATTR Value 2N3904
SYMBOL res 1136 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 992 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 15K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 992 352 R0
SYMATTR InstName R7
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 1360 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 4.75K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL npn 1424 240 R0
WINDOW 0 62 22 Left 2
WINDOW 3 61 77 Left 2
SYMATTR InstName Q_LED
SYMATTR Value 2N3904
SYMBOL diode 1472 384 R0
SYMATTR InstName D1
SYMBOL LED 1584 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL res 1552 160 R0
SYMATTR InstName R9
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL OpAmps\\UniversalOpAmp2 1168 192 R0
SYMATTR InstName U2
TEXT -32 600 Left 2 !.tran 0 1 0 1m
TEXT 1064 240 Left 2 ;Comparator
TEXT -32 520 Left 2 !.param Rval=200k
TEXT -24 560 Left 2 !.step param Rval list 100k 200k 300k 400k
